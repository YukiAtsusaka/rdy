% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/diff_in_means.R
\name{diff_in_means}
\alias{diff_in_means}
\title{Estimate ranking effects (unweighted): raw, unit, and standardized (raw/sd0)}
\usage{
diff_in_means(
  data,
  items,
  treat,
  se_type = "HC2",
  clusters = NULL,
  na_action = c("drop", "none"),
  top_k_max = NULL,
  ...
)
}
\arguments{
\item{data}{A data.frame/tibble with \code{items} and \code{treat}.}

\item{items}{Character vector of ranking columns (1 = top/best). Length >= 2.}

\item{treat}{String; binary treatment column (0/1, logical, or factor codable to 0/1).}

\item{se_type}{SE type for estimatr::lm_robust (default "HC2").}

\item{clusters}{Optional string for clustering variable name in \code{data}.}

\item{na_action}{"drop" (default) or "none". If "drop", listwise on used cols.}

\item{top_k_max}{Optional integer (default J-1).}

\item{...}{Extra args passed to estimatr::lm_robust.}
}
\value{
Tibble with one row per (item Ã— effect). Columns:
estimate_\emph{, std.error_}, conf.low_\emph{, conf.high_} for scales raw/unit/std,
sd_control_raw, sd_control_unit, p.value, outcome, effect_type, item, J, n, n_treat, n_control.
}
\description{
For each item in \code{items}, constructs four outcome families:
\enumerate{
\item Average rank of the target (1 = best):
\itemize{
\item raw outcome: R in {1,...,J} (lower is better)
\item unit outcome: U = (J - R)/(J - 1) in \link{0,1} (higher is better)
\item std outcome: raw effect divided by SD(R | control)
}
\item Pairwise wins vs. others (binary): Y = 1{R_target < R_other}
\item Top-k (binary): Y = 1{R_target <= k}
\item Marginal (binary): Y = 1{R_target == r}
}
}
\details{
Estimation is unweighted difference-in-means via estimatr::lm_robust(y ~ D).
For each effect we report:
\itemize{
\item Raw ATE (for average-rank only; binaries have NA in raw block by design)
\item Unit ATE (for all; binaries' unit == raw)
\item Standardized ATE: (raw effect) / sd0_raw, where sd0_raw = SD of raw outcome among controls
}
}
