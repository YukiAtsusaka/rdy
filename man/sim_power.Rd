% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sim_power.R
\name{sim_power}
\alias{sim_power}
\title{Monte Carlo Power Analysis for Difference-in-Means (with 95\% CI)}
\usage{
sim_power(
  pop,
  items_pattern = "^ch_",
  treat = "treat",
  n_sample = 500,
  n_rep = 50,
  scale_filter = "std",
  eps = 0,
  seed = NULL
)
}
\arguments{
\item{pop}{A data.frame (finite population).}

\item{items_pattern}{Regex to select outcome columns in \code{pop}. Default "^ch_".}

\item{treat}{Name of the treatment indicator column in \code{pop}. Default "treat".}

\item{n_sample}{Sample size per replication. Default 500.}

\item{n_rep}{Number of Monte Carlo replications. Default 50.}

\item{scale_filter}{Character scalar; if not NULL, filter truth/estimates to this scale (e.g., "std").}

\item{eps}{Numerical tolerance for defining "true_nonzero". Default 0.}

\item{seed}{Optional integer seed for reproducibility. Default NULL.}
}
\value{
A list with:
\itemize{
\item \code{sim_results}: tibble of per-replication indicators and metadata
\item \code{summary}: tibble of power by (item, outcome, effect_type)
\item \code{plot}: ggplot object showing power by outcome, faceted by item
}
}
\description{
Repeatedly samples from a finite population, estimates difference-in-means
for outcomes matched by \code{items_pattern}, and computes power against the
population "truth" (taken as the point estimates from \code{diff_in_means(pop, ...)}).
Power is defined as: 95\% CI excludes 0 AND the estimate's sign matches the truth.
}
\details{
This function expects that \code{diff_in_means()} returns a tibble including
columns: \code{item}, \code{outcome}, \code{effect_type}, \code{scale}, \code{estimate},
\code{conf.low}, \code{conf.high}. Missing estimates/intervals are handled gracefully.
}
\examples{
\dontrun{
res <- sim_power(pop, items_pattern = "^ch_", treat = "treat",
                     n_sample = 500, n_rep = 50, scale_filter = "std", seed = 123)
res$summary
print(res$plot)
}
}
